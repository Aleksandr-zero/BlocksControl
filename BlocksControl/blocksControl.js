"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var o=0;o<i.length;o++){var l=i[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function _createClass(t,i,o){return i&&_defineProperties(t.prototype,i),o&&_defineProperties(t,o),t}var WidthControl=function(){function WidthControl(t,i){_classCallCheck(this,WidthControl),this.container=t,this.options=i,this.blocks={},this.percentHeightWindow=window.innerHeight/100,this.findsBlocks_In_Container(),this.calculatesPositionBlocks_Window(),this.complementsOptions_Blocks(),this.calculatesFinalBlockWidth(),this.calculatesFinalBlockHeight(),this.calculatesNumber_For_ScrollingWindow_Block_OutOfSight(),this.sequenceNumbersBlocks=Object.keys(this.blocks)}return _createClass(WidthControl,[{key:"complementsOptions_Blocks",value:function complementsOptions_Blocks(){var o=this;Object.keys(this.options).forEach(function(t){for(var i in o.options[t])o.blocks[t][i]=o.options[t][i]})}},{key:"addEventScrollForWindow",value:function addEventScrollForWindow(){var i=this;window.addEventListener("scroll",function(){var t={top:window.pageYOffset,bottom:window.pageYOffset+document.documentElement.clientHeight};i.checks_If_BlcokVisible(t)})}},{key:"checks_If_BlcokVisible",value:function checks_If_BlcokVisible(i){var o=this;this.sequenceNumbersBlocks.forEach(function(t){if(i.top-o.blocks[t].block.clientHeight<=o.blocks[t].position.top&&o.blocks[t].position.top<i.bottom){if(o.calculatesWindowScrolling(t),o.blocks[t].isVisible)return;o.blocks[t].isVisible=!0}else o.blocks[t].isVisible&&(o.blocks[t].isVisible=!1)})}},{key:"calculatesWindowScrolling",value:function calculatesWindowScrolling(t){var i=(window.innerHeight-this.blocks[t].block.getBoundingClientRect().top)/this.blocks[1].percentScrollWindow;this.changeBlock(t,i)}},{key:"findsBlocks_In_Container",value:function findsBlocks_In_Container(){var l=this,t=this.container.children;Array.prototype.forEach.call(t,function(t){for(var i,o=0;o<t.classList.length;o++)t.classList[o].includes("blocks-control-block")&&(i=(i=t.classList[o].split("-"))[i.length-1],l.blocks[i]={block:t},l.addProperty_IsVisible_Block(i))})}},{key:"addProperty_IsVisible_Block",value:function addProperty_IsVisible_Block(t){this.blocks[t].isVisible=!1}},{key:"calculatesPositionBlocks_Window",value:function calculatesPositionBlocks_Window(){var o=this;Object.keys(this.blocks).forEach(function(t){var i={top:Math.round(window.pageYOffset+o.blocks[t].block.getBoundingClientRect().top),bottom:Math.round(window.pageXOffset+o.blocks[t].block.getBoundingClientRect().bottom)};o.blocks[t].position=i})}},{key:"calculatesFinalBlockWidth",value:function calculatesFinalBlockWidth(){for(var t=Object.keys(this.blocks),i=0;i<t.length;i++){var o,l,c=t[i];"width"===this.blocks[c].actionProperty&&(o=0,l=this.blocks[c].block.clientWidth/100*this.blocks[c].percent,"enlarge"===this.blocks[c].action?o=this.blocks[c].block.clientWidth+l:"reduce"===this.blocks[c].action&&(o=this.blocks[c].block.clientWidth-l),this.blocks[c].finalWidth=o,this.blocks[c].initialWidth=this.blocks[c].block.clientWidth)}}},{key:"calculatesFinalBlockHeight",value:function calculatesFinalBlockHeight(){for(var t=Object.keys(this.blocks),i=0;i<t.length;i++){var o,l,c=t[i];"height"===this.blocks[c].actionProperty&&(o=0,l=this.blocks[c].block.clientHeight/100*this.blocks[c].percent,"enlarge"===this.blocks[c].action?o=this.blocks[c].block.clientHeight+l:"reduce"===this.blocks[c].action&&(o=this.blocks[c].block.clientHeight-l),this.blocks[c].finalHeight=o,this.blocks[c].initialHeight=this.blocks[c].block.clientHeight)}}},{key:"calculatesNumber_For_ScrollingWindow_Block_OutOfSight",value:function calculatesNumber_For_ScrollingWindow_Block_OutOfSight(){var l=this;Object.keys(this.blocks).forEach(function(t){var i=window.innerHeight+l.blocks[t].block.getBoundingClientRect().height,o=i/100;l.blocks[t].numberToScrollWindow=i,l.blocks[t].percentScrollWindow=o})}},{key:"changeBlock",value:function changeBlock(t,i){var o,l;"width"===this.blocks[t].actionProperty?(o=Math.abs(i*((this.blocks[t].finalWidth-this.blocks[t].initialWidth)/100)),l=this.blocks[t].initialWidth,"enlarge"===this.blocks[t].action?l+=o:"reduce"===this.blocks[t].action&&(l-=o),this.setsNewWidthForBlock(t,l)):"height"===this.blocks[t].actionProperty&&(l=Math.abs(i*((this.blocks[t].finalHeight-this.blocks[t].initialHeight)/100)),i=this.blocks[t].initialHeight,"enlarge"===this.blocks[t].action?i+=l:"reduce"===this.blocks[t].action&&(i-=l),this.setsNewHeightForBlock(t,i))}},{key:"setsNewWidthForBlock",value:function setsNewWidthForBlock(t,i){this.blocks[t].block.style.width="".concat(i,"px")}},{key:"setsNewHeightForBlock",value:function setsNewHeightForBlock(t,i){this.blocks[t].block.style.height="".concat(i,"px")}},{key:"run",value:function run(){this.addEventScrollForWindow()}}]),WidthControl}();